openapi: 3.0.2
info:
  title: Trading Document API
  version: 1.0.0
servers:
  - url: http://localhost:9200
    description: Local server
tags:
  - name: business_unit
    description: Business unit management
  - name: eB/L
    description: Electronic Bill of Lading management
paths:
  /business_unit:
    post:
      tags: [business_unit]
      summary: Create a new business unit
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBusinessUnitRequest'
      responses:
        '201':
          description: Business unit created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessUnit'
        '400':
          description: Invalid request
        '500':
          description: Internal server error
    get:
      tags: [business_unit]
      summary: List all business units
      security:
        - bearerAuth: []
      parameters:
        - name: offset
          in: query
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
          description: Offset of the business units to be listed.
        - name: limit
          in: query
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 10
          description: Limit of the business units to be listed.
      responses:
        '200':
          description: Business units retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: integer
                    format: int32
                    description: Total number of business units.
                  records:
                    type: array
                    items:
                      $ref: '#/components/schemas/ListBusinessUnitsRecord'
                    description: Records of business units.
        '400':
          description: Invalid request
        '500':
          description: Internal server error
  /business_unit/{id}:
    get:
      tags: [business_unit]
      summary: Get a specific business unit
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the business unit to retrieve.
      responses:
        '200':
          description: Business unit retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListBusinessUnitsRecord'
        '400':
          description: Invalid request
        '404':
          description: Business unit not found
        '500':
          description: Internal server error
      security:
        - bearerAuth: []
    post:
      tags: [business_unit]
      summary: Update a specific business unit
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the business unit to update.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                requester:
                  type: string
                  description: User who makes the request.
                id:
                  type: string
                  description: Unique DID of a BusinessUnit.
                name:
                  type: string
                  description: Name of the BusinessUnit.
                addresses:
                  type: array
                  items:
                    type: string
                  description: List of addresses associated with the BusinessUnit.
                country:
                  type: string
                  description: 'Country Code of the BusinessUnit. (Eg: US, SG, CA)'
                emails:
                  type: array
                  items:
                    type: string
                  description: List of emails associated with the BusinessUnit.
                phone_numbers:
                  type: array
                  items:
                    type: string
                  description: List of phone numbers associated with the BusinessUnit.
              required:
                - requester
                - id
                - name
      responses:
        '200':
          description: Business unit updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessUnit'
        '400':
          description: Invalid request
        '404':
          description: Business unit not found
        '500':
          description: Internal server error
      security:
        - bearerAuth: []
  /business_unit/{id}/status:
    post:
      tags: [business_unit]
      security:
        - bearerAuth: []
      summary: Set the status of a specific business unit
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the business unit to update.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                requester:
                  type: string
                  description: User who makes the request.
                status:
                  allOf:
                  - $ref: '#/components/schemas/BusinessUnitStatus'
                  description: Status of the application.
              required:
                - requester
                - status
      responses:
        '200':
          description: Business unit status updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessUnit'
        '400':
          description: Invalid request
        '404':
          description: Business unit not found
        '500':
          description: Internal server error
  /business_unit/{id}/authentication:
    post:
      tags: [business_unit]
      security:
        - bearerAuth: []
      summary: Create a new authentication for a business unit
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the business unit
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                requester:
                  type: string
                  description: User who makes the request
                private_key_option:
                  allOf:
                  - $ref: '#/components/schemas/PrivateKeyOption'
                  description: Option of the private key.
                expired_after:
                  type: integer
                  format: int64
                  description: How long (in second) the authentication/certificate will be valid.
              required:
                - requester
                - private_key_option
                - expired_after
      responses:
        '201':
          description: Authentication created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessUnitAuthentication'
        '400':
          description: Bad request, invalid parameters or business unit ID
        '404':
          description: Business unit not found
        '500':
          description: Internal server error
    get:
      tags: [business_unit]
      security:
        - bearerAuth: []
      summary: List all authentications for a business unit
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: List of authentications retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: integer
                    format: int32
                    description: Total number of authentications
                  records:
                    type: array
                    items:
                      $ref: '#/components/schemas/BusinessUnitAuthentication'
                    description: Records of authentications        
        '400':
          description: Bad request, invalid parameters or business unit ID
        '500':
          description: Internal server error
  /business_unit/{id}/authentication/{authentication_id}:
    get:
      tags: [business_unit]
      security:
        - bearerAuth: []
      summary: Get a specific authentication for a business unit
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the business unit
        - name: authentication_id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the authentication
      responses:
        '200':
          description: Authentication retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessUnitAuthentication'
        '400':
          description: Bad request, invalid parameters or business unit ID
        '404':
          description: Authentication not found
        '500':
          description: Internal server error
    delete:
      tags: [business_unit]
      security:
        - bearerAuth: []
      summary: Revoke a specific authentication for a business unit
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the business unit
        - name: authentication_id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the authentication
        - name: requester
          in: query
          required: false
          schema:
            type: string
          description: User who makes the request
      responses:
        '200':
          description: Authentication revoked successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessUnitAuthentication'
        '400':
          description: Bad request, invalid parameters or business unit ID
        '404':
          description: Authentication not found
        '500':
          description: Internal server error

  /ebl:
    get:
      tags: [eB/L]
      summary: List all eB/L
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
        - name: offset
          in: query
          description: Number of items to skip before returning the results
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
        - name: limit
          in: query
          description: Maximum number of items to return
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 20
        - name: status
          in: query
          description: Status of the eB/L to be listed
          schema:
            type: string
            enum:
              - action_needed
              - upcoming
              - sent
              - archive
      responses:
        '200':
          description: eB/L retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListBillOfLadingRecord'
        '400':
          description: Invalid request
        '500':
          description: Internal server error
    post:
      tags: [eB/L]
      summary: Issue or draft a new eB/L
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBillOfLadingRequest'
      responses:
        '201':
          description: eB/L created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillOfLadingPack'
        '400':
          description: Invalid request
        '500':
          description: Internal server error
  /ebl/{id}:
    get:
      tags: [eB/L]
      summary: Get a specific eB/L
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the eB/L to retrieve.
      responses:
        '200':
          description: eB/L retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetBillOfLadingRecord'
        '400':
          description: Invalid request
        '404':
          description: eB/L not found
        '500':
          description: Internal server error
  /ebl/{id}/document:
    get:
      tags: [eB/L]
      summary: Download the uploaded eB/L document
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the eB/L to retrieve
      responses:
        '200':
          description: eB/L file retrieved successfully
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
            application/pdf:
              schema:
                type: string
                format: binary
            image/jpeg:
              schema:
                type: string
                format: binary
            image/png:
              schema:
                type: string
                format: binary
            image/tiff:
              schema:
                type: string
                format: binary
        '400':
          description: Invalid request
        '404':
          description: eB/L not found or eB/L has no document
        '500':
          description: Internal server error
  /ebl/{id}/update:
    post:
      tags: [eB/L]
      summary: Update the draft eB/L
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the eB/L to update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBillOfLadingRequest'
      responses:
        '200':
          description: eB/L updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillOfLadingPack'
        '400':
          description: Invalid request
        '404':
          description: eB/L not found
        '500':
          description: Internal server error
  /ebl/{id}/transfer:
    post:
      tags: [eB/L]
      summary: Transfer the eB/L to next owner
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the eB/L to transfer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferBillOfLadingRequest'
      responses:
        '200':
          description: eB/L transferred successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillOfLadingPack'
        '400':
          description: Invalid request
        '404':
          description: eB/L not found
        '500':
          description: Internal server error
  /ebl/{id}/return:
    post:
      tags: [eB/L]
      summary: Return the eB/L to last owner
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the eB/L to return
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReturnBillOfLadingRequest'
      responses:
        '200':
          description: eB/L returned successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillOfLadingPack'
        '400':
          description: Invalid request
        '404':
          description: eB/L not found
        '500':
          description: Internal server error
  /ebl/{id}/surrender:
    post:
      tags: [eB/L]
      summary: Transfer the eB/L to the release agent
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the eB/L to surrender
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SurrenderBillOfLadingRequest'
      responses:
        '200':
          description: eB/L surrendered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillOfLadingPack'
        '400':
          description: Invalid request
        '404':
          description: eB/L not found
        '500':
          description: Internal server error
  /ebl/{id}/accomplish:
    post:
      tags: [eB/L]
      summary: Accomplish the eB/L
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the eB/L to accomplish
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccomplishBillOfLadingRequest'
      responses:
        '200':
          description: eB/L accomplished successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillOfLadingPack'
        '400':
          description: Invalid request
        '404':
          description: eB/L not found
        '500':
          description: Internal server error
  /ebl/{id}/print_to_paper:
    post:
      tags: [eB/L]
      summary: Print the eB/L to paper
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the eB/L to print to paper
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PrintToPaperBillOfLadingRequest'
      responses:
        '200':
          description: eB/L printed to paper successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillOfLadingPack'
        '400':
          description: Invalid request
        '404':
          description: eB/L not found
        '500':
          description: Internal server error
  /ebl/{id}/amendment_request:
    post:
      tags: [eB/L]
      summary: Request amendment for the eB/L
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the eB/L to request amendment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AmendmentRequestBillOfLadingRequest'
      responses:
        '200':
          description: eB/L requested amendment successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillOfLadingPack'
        '400':
          description: Invalid request
        '404':
          description: eB/L not found
        '500':
          description: Internal server error
  /ebl/{id}/amend:
    post:
      tags: [eB/L]
      summary: Amend the eB/L
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the eB/L to amend
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AmendBillOfLadingRequest'
      responses:
        '200':
          description: eB/L amended successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillOfLadingPack'
        '400':
          description: Invalid request
        '404':
          description: eB/L not found
        '500':
          description: Internal server error
  /ebl/{id}/delete:
    post:
      tags: [eB/L]
      summary: Delete the draft eB/L
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/BURequestHeader'
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the eB/L to amend
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteBillOfLadingRequest'
      responses:
        '200':
          description: eB/L amended successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BillOfLadingPack'
        '400':
          description: Invalid request
        '404':
          description: eB/L not found
        '500':
          description: Internal server error
components:
  securitySchemes:
    bearerAuth:            # arbitrary name for the security scheme
      type: http
      scheme: bearer
  parameters:
    BURequestHeader:
      in: header
      name: X-Business-Unit-ID
      description: DID of the business unit who makes the request
      schema:
        type: string
  schemas:
    PrivateKeyType:
      type: string
      enum:
        - RSA
        - ECDSA
      description: Type of the private key.
    ECDSACurveType:
      type: string
      enum:
        - P-256
        - P-384
        - P-521
      description: Curve type of the private key.
    PrivateKeyOption:
      type: object
      properties:
        key_type:
          allOf:
          - $ref: '#/components/schemas/PrivateKeyType'
          description: Type of the private key.
        bit_length:
          type: integer
          format: int32
          description: Bit length of the private key. Only used when KeyType is RSA.
        curve_type:
          allOf:
          - $ref: '#/components/schemas/ECDSACurveType'
          description: Curve type of the private key. Only used when KeyType is ECDSA.
    BusinessUnitStatus:
      type: string
      enum:
        - active
        - inactive
    BusinessUnitAuthenticationStatus:
      type: string
      enum:
        - active
        - revoked
      description: Status of the authentication.
    BusinessUnit:
      type: object
      properties:
        id:
          type: string
          description: Unique DID of a BusinessUnit.
        version:
          type: integer
          format: int64
          description: Version of the BusinessUnit.
        application_id:
          type: string
          description: The ID of the application this BusinessUnit belongs to.
        status:
          $ref: '#/components/schemas/BusinessUnitStatus'
        name:
          type: string
          description: Name of the BusinessUnit.
        addresses:
          type: array
          items:
            type: string
          description: List of addresses associated with the BusinessUnit.
        country:
          type: string
          description: 'Country Code of the BusinessUnit. (Eg: US, SG, CA)'
        emails:
          type: array
          items:
            type: string
          description: List of emails associated with the BusinessUnit.
        phone_numbers:
          type: array
          items:
            type: string
          description: List of phone numbers associated with the BusinessUnit.
        created_at:
          type: integer
          format: int64
          description: Unix Time (in second) when the BusinessUnit was created.
        created_by:
          type: string
          description: User who created the BusinessUnit.
        updated_at:
          type: integer
          format: int64
          description: Unix Time (in second) when the BusinessUnit was last updated.
        updated_by:
          type: string
          description: User who last updated the BusinessUnit.
    BusinessUnitAuthentication:
      type: object
      properties:
        id:
          type: string
          description: Unique ID of the authentication.
        version:
          type: integer
          format: int64
          description: Version of the authentication.
        business_unit:
          type: string
          description: Unique DID of a BusinessUnit.
        status:
          $ref: '#/components/schemas/BusinessUnitAuthenticationStatus'
        created_at:
          type: integer
          format: int64
          description: Unix Time (in second) when the authentication was created.
        created_by:
          type: string
          description: User who created the authentication.
        revoked_at:
          type: integer
          format: int64
          description: Unix Time (in second) when the authentication was revoked.
        revoked_by:
          type: string
          description: User who revoked the authentication.
        private_key:
          type: string
          description: PEM encoded private key.
        certificate:
          type: string
          description: PEM encoded certificate.
        intermediate_certs:
          type: array
          items:
            type: string
          description: PEM encoded intermediate certificates.
    ListBusinessUnitsRecord:
      type: object
      properties:
        business_unit:
          $ref: '#/components/schemas/BusinessUnit'
        authentications:
          type: array
          items:
            $ref: '#/components/schemas/BusinessUnitAuthentication'
          description: The authentications of the business unit.
    CreateBusinessUnitRequest:
      type: object
      properties:
        requester:
          type: string
          description: User who makes the request.
        name:
          type: string
          description: Name of the BusinessUnit.
        addresses:
          type: array
          items:
            type: string
          description: List of addresses associated with the BusinessUnit.
        country:
          type: string
          description: 'Country Code of the BusinessUnit. (Eg: US, SG, CA)'
        emails:
          type: array
          items:
            type: string
          description: List of emails associated with the BusinessUnit.
        phone_numbers:
          type: array
          items:
            type: string
          description: List of phone numbers associated with the BusinessUnit.
        status:
          $ref: '#/components/schemas/BusinessUnitStatus'
      required:
        - requester
        - name
        - status
    # eB/L schemas
    BillOfLadingDocumentType:
      type: string
      description: B/L Document Type
      enum:
        - MasterBillOfLading
        - HouseBillOfLading
    BillOfLadingType:
      type: string
      description: B/L Type
      enum:
        - NonNegotiable
        - Negotiable
    BillOfLadingAction:
      type: string
      description: action to perform on the eB/L
      enum:
        - UPDATE
        - TRANSFER
        - RETURN
        - SURRENDER
        - ACCOMPLISH
        - PRINT_TO_PAPER
        - AMENDMENT_REQUEST
        - AMEND
    DocumentStatus:
      type: string
      description: Document status
      enum:
        - DRFT # Draft
        - ISSU # Issued
    Party:
      type: object
      description: Refers to a company or a legal entity
      properties:
        partyName:
          type: string
          description: Name of the party
    DocumentParty:
      type: object
      description: Party involved in the transport document
      properties:
        party:
          $ref: '#/components/schemas/Party'
        partyFunction:
          type: string
          description: Role of the party
          enum:
            - DDR # Issuing agent
            - OS  # Shipper
            - CN  # Consignee
            - DDS # Release agent
    ShippingInstruction:
      type: object
      description: Enrichment to the original booking shard by the shipper to the carrier
      properties:
        shippingInstructionReference:
          type: string
          description: B/L Number
        documentStatus:
          $ref: '#/components/schemas/DocumentStatus'
        isToOrder:
          type: boolean
          description: Indicate if the eB/L is negotiable
        documentParties:
          type: array
          description: Parties involved in the eB/L
          items:
            $ref: '#/components/schemas/DocumentParty'
    Location:
      type: object
      properties:
        locationName:
          type: string
          description: Name of the location
        UNLocationCode:
          type: string
          description: UN location code
    ShipmentLocation:
      type: object
      description: Maps the relationship between shipment and location
      properties:
        location:
          $ref: '#/components/schemas/Location'
        shipmentLocationTypeCode:
          type: string
          enum:
            - POL
            - POD
        eventDateTime:
            type: string
            format: date-time
            description: When the event happened
    Transport:
      type: object
      properties:
        transportPlanStage:
          type: string
          enum:
            - PRC # Pre-Carriage
            - MNC # Main Carriage Transport
            - ONC # On-Carriage Transport
        plannedArrivalDate:
          type: string
          format: date-time
          description: Estimated time of arrival
    TransportDocument:
      type: object
      description: Document that governs the terms of carriage between shipper and carrier for maritime transportation
      properties:
        shippingInstruction:
          $ref: '#/components/schemas/ShippingInstruction'
        transportDocumentCreatedDateTime:
          type: string
          format: date-time
          description: When the document was created
        transportDocumentUpdatedDateTime:
          type: string
          format: date-time
          description: When the document was updated
        shipmentLocations:
          type: array
          items:
            $ref: '#/components/schemas/ShipmentLocation'
        transports:
          type: array
          items:
            $ref: '#/components/schemas/Transport'
    FileInfo:
      type: object
      description: Metadata of the uploaded document
      properties:
        name:
          type: string
          description: File name of the uploaded document
        type:
          type: string
          description: MIME type of the uploaded document
    File:
      type: object
      description: Metadata of the uploaded document
      properties:
        name:
          type: string
          description: File name of the uploaded document
        type:
          type: string
          description: MIME type of the uploaded document
        content:
          type: string
          format: byte
          description: base64-encoded content of the document
    BillOfLading:
      type: object
      description: Event of issuing the eB/L
      properties:
        bill_of_lading:
          $ref: '#/components/schemas/TransportDocument'
        file:
          $ref: '#/components/schemas/FileInfo'
        doc_type:
          $ref: '#/components/schemas/BillOfLadingDocumentType'
        transfer_to:
          type: string
          description: DID of the next owner
        created_by:
          type: string
          description: DID of the issuing agent
        created_at:
          type: string
          format: date-time
          description: When the eB/L was created
        note:
          type: string
          description: Optional note from the requester
        meta_data:
          type: string
          description: All fully customized data.
    Transfer:
      type: object
      description: Event of transferring the eB/L
      properties:
        transfer_by:
          type: string
          description: DID of the business unit who makes the transfer
        transfer_to:
          type: string
          description: DID of the business unit who receives the transfer
        transfer_at:
          type: string
          format: date-time
          description: When the eB/L was transferred
        note:
          type: string
          description: Optional note from the requester
        meta_data:
          type: string
          description: All fully customized data.
    Return:
      type: object
      description: Event of returning the eB/L
      properties:
        return_by:
          type: string
          description: DID of the business unit who makes the return
        return_to:
          type: string
          description: DID of the business unit who receives the return
        return_at:
          type: string
          format: date-time
          description: When the eB/L was returned
        note:
          type: string
          description: Optional note from the requester
        meta_data:
          type: string
          description: All fully customized data.
    Surrender:
      type: object
      description: Event of surrendering the eB/L
      properties:
        surrender_by:
          type: string
          description: DID of the business unit who makes the surrender
        surrender_to:
          type: string
          description: DID of the business unit who receives the surrender
        surrender_at:
          type: string
          format: date-time
          description: When the eB/L was surrendered
        note:
          type: string
          description: Optional note from the requester
        meta_data:
          type: string
          description: All fully customized data.
    AmendmentRequest:
      type: object
      description: Event of requesting amendment for the eB/L
      properties:
        request_by:
          type: string
          description: DID of the business unit who makes the request
        request_to:
          type: string
          description: DID of the business unit who receives the request
        request_at:
          type: string
          format: date-time
          description: When the eB/L was requested amendment
        note:
          type: string
          description: Optional note from the requester
        meta_data:
          type: string
          description: All fully customized data.
    PrintToPaper:
      type: object
      description: Event of printing the eB/L to paper
      properties:
        print_by:
          type: string
          description: DID of the business unit who makes the print to paper
        print_at:
          type: string
          format: date-time
          description: When the eB/L was printed to paper
        note:
          type: string
          description: Optional note from the requester
        meta_data:
          type: string
          description: All fully customized data.
    Accomplish:
      type: object
      description: Event of accomplishing the eB/L
      properties:
        accomplish_by:
          type: string
          description: DID of the business unit who makes the accomplish
        accomplish_at:
          type: string
          format: date-time
          description: When the eB/L was accomplished
        note:
          type: string
          description: Optional note from the requester
        meta_data:
          type: string
          description: All fully customized data.
    BillOfLadingEvent:
      type: object
      description: Event of the eB/L
      properties:
        bill_of_lading:
          $ref: '#/components/schemas/BillOfLading'
        transfer:
          $ref: '#/components/schemas/Transfer'
        return:
          $ref: '#/components/schemas/Return'
        surrender:
          $ref: '#/components/schemas/Surrender'
        amendment_request:
          $ref: '#/components/schemas/AmendmentRequest'
        print_to_paper:
          $ref: '#/components/schemas/PrintToPaper'
        accomplish:
          $ref: '#/components/schemas/Accomplish'
    BillOfLadingPack:
      type: object
      description: Detail information of the eB/L
      properties:
        id:
          type: string
          description: Unique ID of a eB/L
        version:
          type: integer
          format: int64
          description: Version of the eB/L
        parent_hash:
          type: string
          description: SHA512 hash of the previous version of the eB/L
        current_owner:
          type: string
          description: DID of the current owner
        events:
          type: array
          description: eB/L history event list
          items:
            $ref: '#/components/schemas/BillOfLadingEvent'
    GetBillOfLadingRecord:
      type: object
      properties:
        allowed_actions:
          type: array
          items:
            $ref: '#/components/schemas/BillOfLadingAction'
        record:
          $ref: '#/components/schemas/BillOfLadingPack'
    ListBillOfLadingRecord:
      type: object
      properties:
        total:
          type: integer
          format: int32
          description: Total number of the eB/L
        records:
          type: array
          items:
            $ref: '#/components/schemas/BillOfLadingPack'
    # eB/L API request
    BaseRequest:
      type: object
      properties:
        meta_data:
          type: string
          description: All fully customized data.
    UpdateBillOfLadingRequest:
      allOf:
        - $ref: '#/components/schemas/BaseRequest'
        - type: object
          properties:
            authentication_id:
              type: string
              description: The ID for authentication. The eB/L will be signed with the authentication.
            file:
              allOf:
              - $ref: '#/components/schemas/File'
              description: The file associated with the request
            bl_number:
              type: string
              description: The bill of lading number
            bl_doc_type:
              allOf:
              - $ref: '#/components/schemas/BillOfLadingDocumentType'
              description: The type of the bill of lading document
            to_order:
              type: boolean
              description: Indicates if the request is to order.
            pol:
              allOf:
              - $ref: '#/components/schemas/Location'
              description: The port of loading
            pod:
              allOf:
              - $ref: '#/components/schemas/Location'
              description: The port of discharge
            eta:
              type: string
              format: date-time
              description: The estimated time of arrival
            shipper:
              type: string
              description: The shipper of the eB/L. It's a DID of the business unit.
            consignee:
              type: string
              description: The consignee of the eB/L. It's a DID of the business unit.
            release_agent:
              type: string
              description: The release agent of the eB/L. It's a DID of the business unit.
            note:
              type: string
              description: Any additional notes
            draft:
              type: boolean
              nullable: true
              description: Indicates if the eB/L is a draft
          required:
            - authentication_id
            - file
            - bl_number
            - document_type
            - bl_type
            - pol
            - pod
            - shipper
            - consignee
            - release_agent
            - draft
    TransferBillOfLadingRequest:
      allOf:
        - $ref: '#/components/schemas/BaseRequest'
        - type: object
          properties:
            authentication_id:
              type: string
              description: The ID for authentication. The eB/L will be signed with the authentication.
            note:
              type: string
              description: Optional note from the requester
          required:
            - authentication_id
    ReturnBillOfLadingRequest:
      allOf:
        - $ref: '#/components/schemas/BaseRequest'
        - type: object
          properties:
            authentication_id:
              type: string
              description: The ID for authentication. The eB/L will be signed with the authentication.
            note:
              type: string
              description: Optional note from the requester
          required:
            - authentication_id
    SurrenderBillOfLadingRequest:
      allOf:
        - $ref: '#/components/schemas/BaseRequest'
        - type: object
          properties:
            authentication_id:
              type: string
              description: The ID for authentication. The eB/L will be signed with the authentication.
            note:
              type: string
              description: Optional note from the requester
          required:
            - authentication_id
    AccomplishBillOfLadingRequest:
      allOf:
        - $ref: '#/components/schemas/BaseRequest'
        - type: object
          properties:
            authentication_id:
              type: string
              description: The ID for authentication. The eB/L will be signed with the authentication.
            note:
              type: string
              description: Optional note from the requester
          required:
            - authentication_id
    PrintToPaperBillOfLadingRequest:
      allOf:
        - $ref: '#/components/schemas/BaseRequest'
        - type: object
          properties:
            note:
              type: string
              description: Optional note from the requester
    AmendmentRequestBillOfLadingRequest:
      allOf:
        - $ref: '#/components/schemas/BaseRequest'
        - type: object
          properties:
            authentication_id:
              type: string
              description: The ID for authentication. The eB/L will be signed with the authentication.
            note:
              type: string
              description: Optional note from the requester
          required:
            - authentication_id
            - note
    AmendBillOfLadingRequest:
      allOf:
        - $ref: '#/components/schemas/BaseRequest'
        - type: object
          properties:
            authentication_id:
              type: string
              description: The ID for authentication. The eB/L will be signed with the authentication.
            file:
              allOf:
                - $ref: '#/components/schemas/File'
              description: The file associated with the request
            number:
              type: string
              description: B/L number
            document_type:
              $ref: '#/components/schemas/BillOfLadingDocumentType'
            bl_type:
              $ref: '#/components/schemas/BillOfLadingType'
            pol:
              type: string
              description: Port of loading
            pod:
              type: string
              description: Port of discharge
            eta:
              type: string
              format: date-time
              description: Estimate time of arrival
            note:
              type: string
              description: Optional note from the requester
          required:
            - authentication_id
            - file
            - number
            - document_type
            - bl_type
            - pol
            - pod
    DeleteBillOfLadingRequest:
      allOf:
        - $ref: '#/components/schemas/BaseRequest'
        - type: object
          properties:
            authentication_id:
              type: string
              description: The ID for authentication. The eB/L will be signed with the authentication.
            note:
              type: string
              description: Optional note from the requester
          required:
            - authentication_id
